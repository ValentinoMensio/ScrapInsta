[pytest]
pythonpath = src
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    -v
    --strict-markers
    --tb=short
    # Coverage reporting (descomentado para habilitar)
    --cov=src/scrapinsta
    --cov-report=html
    --cov-report=term-missing
    --cov-report=xml
    --cov-branch
    # --cov-fail-under=80  # Descomentar cuando se alcance 80% de cobertura
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (may use test database)
    slow: Slow tests (skip in CI unless explicitly run)
    e2e: End-to-end tests (full flow from API to persistence)
    db: Tests that require database
filterwarnings =
    # Ignorar warnings de deprecación de Pydantic v2 sobre Field(env=...)
    # Estos warnings aparecen porque Settings usa Field(env=...) que está deprecated
    # Se corregirán cuando se migre Settings a la nueva API de pydantic-settings
    ignore::pydantic.warnings.PydanticDeprecatedSince20:scrapinsta.config.settings
    ignore::DeprecationWarning:pydantic
